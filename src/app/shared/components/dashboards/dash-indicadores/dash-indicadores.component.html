<div class="app-content content">
    <div class="content-wrapper">
      <div class="content-header row mb-1">
        <app-breadcrumb class="col-12" [breadcrumb]="breadcrumb"></app-breadcrumb>
      </div>
      <div class="content-body">
        <section id="selection-n-deletion">
          <div class="row">
  
            <div class="col-12">
              <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs" style="justify-content: end;">
                <li [ngbNavItem]="1">
                    <a ngbNavLink>RESUMEN DEL MES SELECCIONADO</a>
                      <ng-template ngbNavContent>
                        
                        <div class="card " *ngIf="action">
                          <div class="card-header">
                            <h5 class="card-title" style="bottom:13px;">{{filtro_grupo === 'IMAG' ? 'ATENCIÓN DE EXAMENES DE IMAGENES' : filtro_grupo === 'LABO' ? 'ATENCIÓN DE EXAMENES DE LABORATORIO': 'ATENCIÓN DE RECETAS'}}</h5>
                            <!-- <p>{{message}}</p> -->
                            
                          </div>
                          <div class="card-content collapse show">
                            <div class="card-body">
                              <app-panel-cabecera [panelCabecera] = "panelOptions"></app-panel-cabecera>
                              <div class="table table-striped table-bordered selection-deletion-row">
                                <div class="box box-solid">    
                                  <div id="accordion1">
                                      <div class="card">
                                        <div class="card-header-info" >
                                          <div class="box-header">
                                            <div class="toggle-table">
                                              <div class="callout callout-info">
                                                <h3 class="box-title">PRODUCCIÓN</h3>
                                              </div>
                                              <button type="button" class="btn btn-outline-primary" (click)="collapse1.toggle()" [attr.aria-expanded]="!isCollapsed1"
                                              aria-controls="collapseExample">
                                              <i class="fa fa-minus" *ngIf="!isCollapsed1"> </i>
                                              <i class="fa fa-plus" *ngIf="isCollapsed1"> </i> 
                                              </button>
                                            </div>
                                          </div>
                                        </div>
                                        <div #collapse1="ngbCollapse" [(ngbCollapse)]="isCollapsed1">
                                          <div>
                                            <!-- <div class="row" style="align-items: center;justify-content: space-between;">
                                              <ul class="list-group list-group-horizontal list-group-flush">
                                                <li class="list-group-item border-0 pl-0">
                                                  <button class="btn btn-sm font-weight-bold btn-link" (click)="copyTableToClipboard(1)">
                                                    <i class="fa fa-external-link"></i>
                                                    Copiar tabla
                                                  </button>
                                                </li>
                                                <li class="list-group-item border-0 pl-0">
                                                  <button class="btn btn-sm font-weight-bold btn-link" (click)="exportToExcel(1)">
                                                    <i class="fa fa-external-link"></i>
                                                    Exportar tabla a Excel
                                                  </button>
                                                </li>
                                              </ul>
                                            </div> -->
                                            <ngx-datatable #myTable1
                                            class="bootstrap table table-striped"
                                            id="datatablele"
                                              [columns]="columns1"
                                              [rows]="rows1"
                                              [columnMode]="ColumnMode.force"
                                              [headerHeight]="$any('auto')"
                                              [rowHeight]="$any('auto')"
                                              [scrollbarH]="true"
                                              [selected]="selected"
                                              [selectionType]="SelectionType.single"
                                              
                                              >
                                              <ngx-datatable-column [sorteable] = false [headerClass]="column.headerClass" [cellClass]="column.cellClass" [summaryFunc]="column.prop == 'PeriodoTXT' ? summaryNull:summaryForAmount" [flexGrow]="1" [minWidth]="90" [width]="column.width" *ngFor="let column of columns1; let i = index;" name="{{column.name}}" prop="{{column.prop}}">
                                                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                                                  let-row="row">
                                                  <span [ngClass]="{'row-paddin': row.indicador.includes('Compra Parcial')  || row.indicador.includes('Compra Total') }" *ngIf="column.prop == 'indicador'">{{value}}</span>
                                                  <span *ngIf="column.prop !== 'indicador'">{{value | number: '1.0'}}</span>
                                                </ng-template>
                                              </ngx-datatable-column>
                                            </ngx-datatable>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="card">
                                        <div class="card-header-info" >
                                          <div class="box-header">
                                            <div class="toggle-table">
                                              <div class="callout callout-info">
                                                <h3 class="box-title">INDICADORES</h3>
                                              </div>
                                              <button type="button" class="btn btn-outline-primary" (click)="collapse2.toggle()" [attr.aria-expanded]="!isCollapsed2"
                                              aria-controls="collapseExample">
                                              <i class="fa fa-minus" *ngIf="!isCollapsed2"> </i>
                                              <i class="fa fa-plus" *ngIf="isCollapsed2"> </i> 
                                              </button>
                                            </div>
                                          </div>
                                        </div>
                                        <div #collapse2="ngbCollapse" [(ngbCollapse)]="isCollapsed2">
                                          <div>
                                            <!-- <div class="row" style="align-items: center;justify-content: space-between;">
                                              <ul class="list-group list-group-horizontal list-group-flush">
                                                <li class="list-group-item border-0 pl-0">
                                                  <button class="btn btn-sm font-weight-bold btn-link" (click)="copyTableToClipboard(2)">
                                                    <i class="fa fa-external-link"></i>
                                                    Copiar tabla
                                                  </button>
                                                </li>
                                                <li class="list-group-item border-0 pl-0">
                                                  <button class="btn btn-sm font-weight-bold btn-link" (click)="exportToExcel(2)">
                                                    <i class="fa fa-external-link"></i>
                                                    Exportar tabla a Excel
                                                  </button>
                                                </li>
                                              </ul>
                                            </div> -->
                                            <ngx-datatable #myTable2
                                            class="bootstrap table table-striped mt-3"
                                            id="datatablele"
                                              [columns]="columns2"
                                              [rows]="rows2"
                                              [columnMode]="ColumnMode.force"
                                              [headerHeight]="$any('auto')"
                                              [rowHeight]="$any('auto')"
                                              [loadingIndicator]="isLoading"
                                              [scrollbarH]="true"
                                              [selected]="selected"
                                              [selectionType]="SelectionType.single"
                                              
                                              >
                                              <ngx-datatable-column [headerClass]="column.headerClass" [cellClass]="column.cellClass"  [flexGrow]="1" [minWidth]="90" [width]="column.width" *ngFor="let column of columns2; let i = index;" name="{{column.name}}" prop="{{column.prop}}">
                                                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                                                  let-row="row">
                                                  <span [ngClass]="{'row-paddin': row.indicador.includes(' % ordenes compradas parcialmente por atenciones')  || row.indicador.includes(' % ordenes compradas totalmente por atenciones') }" *ngIf="column.prop == 'indicador'">{{value}}</span>
                                                  <span *ngIf="column.prop !== 'indicador'">{{value | number: '1.2-2'}} %</span>
                                                </ng-template>
                                              </ngx-datatable-column>
                                            </ngx-datatable>
                                            <ngx-datatable #myTable3
                                            class="bootstrap table table-striped mt-3"
                                            id="datatablele"
                                              [columns]="columns3"
                                              [rows]="rows3"
                                              [columnMode]="ColumnMode.force"
                                              [headerHeight]="$any('auto')"
                                              [rowHeight]="$any('auto')"
                                              [loadingIndicator]="isLoading"
                                              [scrollbarH]="true"
                                              [selected]="selected"
                                              [selectionType]="SelectionType.single"
                                             
                                              >
                                              <ngx-datatable-column [headerClass]="column.headerClass" [cellClass]="column.cellClass"  [flexGrow]="1" [minWidth]="90" [width]="column.width" *ngFor="let column of columns3; let i = index;" name="{{column.name}}" prop="{{column.prop}}">
                                                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                                                  let-row="row">
                                                  <!-- <span>{{value}}</span> -->
                                                  <span [ngClass]="{'row-paddin': row.indicador.includes(' % ordenes compradas parcialmente por paciente atendido')  || row.indicador.includes('% ordenes compradas totalmente por paciente atendido') }" *ngIf="column.prop == 'indicador'">{{value}}</span>
                                                  <span *ngIf="column.prop !== 'indicador'">{{value | number: '1.2-2'}} %</span>
                                                </ng-template>
                                              </ngx-datatable-column>
                                            </ngx-datatable>
                                            <ngx-datatable #myTable4
                                            class="bootstrap table table-striped mt-3"
                                            id="datatablele"
                                              [columns]="columns4"
                                              [rows]="rows4"
                                              [columnMode]="ColumnMode.force"
                                              [headerHeight]="$any('auto')"
                                              [rowHeight]="$any('auto')"
                                              [loadingIndicator]="isLoading"
                                              [scrollbarH]="true"
                                              
                                              [selected]="selected"
                                              [selectionType]="SelectionType.single"
                                              
                                              >
                                              <ngx-datatable-column [headerClass]="column.headerClass" [cellClass]="column.cellClass"  [flexGrow]="1" [minWidth]="90" [width]="column.width" *ngFor="let column of columns4; let i = index;" name="{{column.name}}" prop="{{column.prop}}">
                                                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                                                  let-row="row">
                                                  <!-- <span>{{value}}</span> -->
                                                  <span [ngClass]="{'row-paddin': row.indicador.includes('% ordenes compradas totalmente')}" *ngIf="column.prop == 'indicador'">{{value}}</span>
                                                    <!-- <span *ngIf="value > 0 && column.prop !== 'PeriodoTXT' && column.prop !== 'Total'" [title]="value">
                                                      <a href="javascript:;" (click)="open($event, column.prop,'PAGADO','',content)" style="color: #4B9FDE;">{{value }}</a>
                                                    </span> -->
                                                    <span *ngIf="column.prop !== 'indicador'">{{value | number: '1.2-2'}} %</span>
                                                  <!-- <span *ngIf="column.prop !== 'PeriodoTXT'">{{value  | currency }}</span> -->
                                                </ng-template>
                                              </ngx-datatable-column>
                                            </ngx-datatable>
                                          </div>
                                        </div>
                                      </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                      </div>
                      </ng-template>
                </li>
                <li [ngbNavItem]="2">
                    <a ngbNavLink>RESUMEN ANUAL</a>
                      <ng-template ngbNavContent>
                        
                        <div class="card " *ngIf="action">
                          <div class="card-header">
                            <h5 class="card-title" style="bottom:13px;">{{filtro_grupo === 'IMAG' ? 'ATENCIÓN DE EXAMENES DE IMAGENES' : filtro_grupo === 'LABO' ? 'ATENCIÓN DE EXAMENES DE LABORATORIO': 'ATENCIÓN DE RECETAS'}}</h5>
                            <!-- <p>{{message}}</p> -->
                            
                          </div>
                          <div class="card-content collapse show">
                            <div class="card-body">
                              <app-panel-cabecera [panelCabecera] = "panelOptions2"></app-panel-cabecera>
                              <div class="table table-striped table-bordered selection-deletion-row">
                                <div class="box box-solid">
                                  <div id="accordion2">
                                      <div class="card">
                                        <div class="card-header-info" >
                                          <div class="box-header">
                                            <div class="toggle-table">
                                              <div class="callout callout-info">
                                                <h3 class="box-title">PRODUCCIÓN</h3>
                                              </div>
                                              <button type="button" class="btn btn-outline-primary" (click)="collapse5.toggle()" [attr.aria-expanded]="!isCollapsed5"
                                              aria-controls="collapseExample">
                                              <i class="fa fa-minus" *ngIf="!isCollapsed5"> </i>
                                              <i class="fa fa-plus" *ngIf="isCollapsed5"> </i> 
                                              </button>
                                            </div>
                                          </div>
                                        </div>
                                        <div #collapse5="ngbCollapse" [(ngbCollapse)]="isCollapsed5">
                                            <div class="row" style="align-items: center;justify-content: space-between;">
                                              <ul class="list-group list-group-horizontal list-group-flush">
                                                <li class="list-group-item border-0 pl-0">
                                                  <button type="button" (click)="showTableDasboard(1, 0)"
                                                    class="btn-shadow mr-3 btn btn-info">
                                                    <i class="pe-7s-credit"></i>
                                                  </button>
                                                  <button type="button" (click)="showTableDasboard(1, 1)" class="btn-shadow btn btn-info float-right">
                                                    <i class="pe-7s-graph3"></i>
                                                  </button>
                                                </li>
                                              </ul>
                                            </div>
                                            <div class="card-body" *ngIf="isGrafico1">
                                              <div class="d-block" *ngIf="!isLoading1">
                                                  <app-barchar 
                                                  [chartData]="data" [chartOptions]="options1"  [context]="context1"
                                                  ></app-barchar>
                                              </div>
                                            </div>
                                            <ngx-datatable #myTable5 *ngIf="isTable1"
                                            class="bootstrap table table-striped"
                                            id="datatablele"
                                              [columns]="columns5"
                                              [rows]="rows5"
                                              [columnMode]="ColumnMode.force"
                                              [headerHeight]="$any('auto')"
                                              [rowHeight]="$any('auto')"
                                              [scrollbarH]="true"
                                              [selected]="selected"
                                              [selectionType]="SelectionType.single"
                                              
                                              >
                                              <ngx-datatable-column  [sortable]="false" [headerClass]="column.headerClass" [cellClass]="column.cellClass" [flexGrow]="1" [minWidth]="90" [width]="column.width" *ngFor="let column of columns5; let i = index;" name="{{column.name}}" prop="{{column.prop}}">
                                                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                                                  let-row="row">
                                                  <!-- <span *ngIf="column.prop == 'PeriodoTXT' || column.prop == 'Total'">{{value}}</span>
                                                  <span *ngIf="value > 0 && column.prop !== 'PeriodoTXT' && column.prop !== 'Total'" [title]="value">
                                                    <a href="javascript:;" (click)="open($event, column.prop,'PAGADO','',content)" style="color: #4B9FDE;">{{value }}</a>
                                                  </span>
                                                  <span *ngIf="value == 0 && column.prop !== 'PeriodoTXT'">{{value }}</span> -->

                                                  <span [ngClass]="{'row-paddin': row.indicador.includes('Compra Parcial')  || row.indicador.includes('Compra Total') }" *ngIf="column.prop == 'indicador'">{{value}}</span>
                                                  <span *ngIf="column.prop !== 'indicador' && column.prop !== 'prom'">{{value | number: '1.0'}}</span>
                                                  <span *ngIf="column.prop == 'prom'">{{value | number: '1.2-2'}}</span>
                                                </ng-template>
                                              </ngx-datatable-column>
                                            </ngx-datatable>
                                            <!-- <div class="card">
                                              <div class="card-header">
                                                <div class="row" style="align-items: center;justify-content: space-between;">
                                                  <div class="">
                                                      <p class="box-title">Exámenes de Imágenes</p>
                                                  </div>
                                                  <ul class="list-group list-group-horizontal list-group-flush" style="flex-wrap: wrap;">
                                                    
                                                    <li class="list-group-item border-0 pl-0">
                                                      <a  id="downloadlink" href="#" 
                                                        class="btn btn-sm font-weight-bold btn-link" (click)="guardarImagen()" download>
                                                        <i class="fa fa-external-link"></i>
                                                        Guardar Imagen
                                                      </a>
                                                    </li>
                                                  </ul>                                              
                                                </div>
                                              </div>
                                              <div class="card-body">
                                                  <div class="d-block" >
                                                    <canvas #baseChart id="chart-1">
                                                    </canvas>
                                                  </div>
                                              </div>
                                            </div> -->
                                            <!-- <div class="card">
                                              <div class="card-header">
                                                <div class="row" style="align-items: center;justify-content: space-between;">
                                                  <div class="">
                                                      <p class="box-title">Exámenes de Imágenes - Atenciones por Sede</p>
                                                  </div>
                                                  <ul class="list-group list-group-horizontal list-group-flush" style="flex-wrap: wrap;">
                                                    
                                                    <li class="list-group-item border-0 pl-0">
                                                      <a  id="downloadlink1" href="#" 
                                                        class="btn btn-sm font-weight-bold btn-link" (click)="guardarImagen1()" download>
                                                        <i class="fa fa-external-link"></i>
                                                        Guardar Imagen
                                                      </a>
                                                    </li>
                                                  </ul>                                              
                                                </div>
                                              </div>
                                              <div class="card-body">
                                                  <div class="d-block" >
                                                    <canvas #baseChart id="chart-2">
                                                    </canvas>
                                                  </div>
                                              </div>
                                            </div> -->
                                        </div>
                                      </div>
                                      
                                      <div class="card">
                                        <div class="card-header-info" >
                                          <div class="box-header">
                                            <div class="toggle-table">
                                              <div class="callout callout-info">
                                                <h3 class="box-title">INDICADORES</h3>
                                              </div>
                                              <button type="button" class="btn btn-outline-primary" (click)="collapse6.toggle()" [attr.aria-expanded]="!isCollapsed6"
                                              aria-controls="collapseExample">
                                              <i class="fa fa-minus" *ngIf="!isCollapsed6"> </i>
                                              <i class="fa fa-plus" *ngIf="isCollapsed6"> </i> 
                                              </button>
                                            </div>
                                          </div>
                                        </div>
                                        <div #collapse6="ngbCollapse" [(ngbCollapse)]="isCollapsed6">
                                            <div class="row" style="align-items: center;justify-content: space-between;">
                                              <ul class="list-group list-group-horizontal list-group-flush">
                                                <li class="list-group-item border-0 pl-0">
                                                  <button type="button" (click)="showTableDasboard(2, 0)"
                                                    class="btn-shadow mr-3 btn btn-info">
                                                    <i class="pe-7s-credit"></i>
                                                  </button>
                                                  <button type="button" (click)="showTableDasboard(2, 1)" class="btn-shadow btn btn-info float-right">
                                                    <i class="pe-7s-graph3"></i>
                                                  </button>
                                                </li>
                                              </ul>
                                            </div>
                                            <div class="card-body" *ngIf="isGrafico2">
                                              <div class="d-block" >
                                                  <app-barchar 
                                                  [chartData]="data" [chartOptions]="options1"  [context]="context2"
                                                  ></app-barchar>
                                              </div>
                                            </div>
                                            <ngx-datatable #myTable6 *ngIf="isTable2"
                                            class="bootstrap table table-striped"
                                            id="datatablele"
                                              [columns]="columns6"
                                              [rows]="rows6"
                                              [columnMode]="ColumnMode.force"
                                              [headerHeight]="$any('auto')"
                                              [rowHeight]="$any('auto')"
                                              [scrollbarH]="true"
                                              [selected]="selected"
                                              [selectionType]="SelectionType.single"
                                              
                                              >
                                              <ngx-datatable-column [sortable]="false" [headerClass]="column.headerClass" [cellClass]="column.cellClass"  [flexGrow]="1" [minWidth]="90" [width]="column.width" *ngFor="let column of columns6; let i = index;" name="{{column.name}}" prop="{{column.prop}}">
                                                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                                                  let-row="row">
                                                  <span [ngClass]="{'row-paddin': row.indicador.includes(' % ordenes compradas parcialmente por atenciones')  || row.indicador.includes(' % ordenes compradas totalmente por atenciones') }" *ngIf="column.prop == 'indicador'">{{value}}</span>
                                                  <span *ngIf="column.prop !== 'indicador'">{{value | number: '1.2-2'}} %</span>
                                                </ng-template>
                                              </ngx-datatable-column>
                                            </ngx-datatable>
                                            <!-- <div class="card">
                                              <div class="card-header">
                                                <div class="row" style="align-items: center;justify-content: space-between;">
                                                  <div class="">
                                                      <p class="box-title">% de Ordenes Emitidas por Atención por Sede</p>
                                                  </div>
                                                  <ul class="list-group list-group-horizontal list-group-flush" style="flex-wrap: wrap;">
                                                    
                                                    <li class="list-group-item border-0 pl-0">
                                                      <a  id="downloadlink2" href="#" 
                                                        class="btn btn-sm font-weight-bold btn-link" (click)="guardarImagen2()" download>
                                                        <i class="fa fa-external-link"></i>
                                                        Guardar Imagen
                                                      </a>
                                                    </li>
                                                  </ul>                                              
                                                </div>
                                              </div>
                                              <div class="card-body">
                                                  <div class="d-block" >
                                                    <canvas #baseChart id="chart-3">
                                                    </canvas>
                                                  </div>
                                              </div>
                                            </div> -->
                                            <div class="row" style="align-items: center;justify-content: space-between;">
                                              <ul class="list-group list-group-horizontal list-group-flush">
                                                <li class="list-group-item border-0 pl-0">
                                                  <button type="button" (click)="showTableDasboard(3, 0)"
                                                    class="btn-shadow mr-3 btn btn-info">
                                                    <i class="pe-7s-credit"></i>
                                                  </button>
                                                  <button type="button" (click)="showTableDasboard(3, 1)" class="btn-shadow btn btn-info float-right">
                                                    <i class="pe-7s-graph3"></i>
                                                  </button>
                                                </li>
                                              </ul>
                                            </div>
                                            <div class="card-body" *ngIf="isGrafico3">
                                              <div class="d-block" *ngIf="!isLoading3">
                                                  <app-barchar 
                                                  [chartData]="data" [chartOptions]="options1"  [context]="context3"
                                                  ></app-barchar>
                                              </div>
                                            </div>
                                            <ngx-datatable #myTable7 *ngIf="isTable3"
                                            class="bootstrap table table-striped mt-3"
                                            id="datatablele"
                                              [columns]="columns7"
                                              [rows]="rows7"
                                              [columnMode]="ColumnMode.force"
                                              [headerHeight]="$any('auto')"
                                              [rowHeight]="$any('auto')"
                                              [scrollbarH]="true"
                                              >
                                              <ngx-datatable-column [sortable]="false" [headerClass]="column.headerClass" [cellClass]="column.cellClass" [flexGrow]="1" [minWidth]="90" [width]="column.width" *ngFor="let column of columns7; let i = index;" name="{{column.name}}" prop="{{column.prop}}">
                                                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                                                  let-row="row">
                                                  <span [ngClass]="{'row-paddin': row.indicador.includes(' % ordenes compradas parcialmente por paciente atendido')  || row.indicador.includes('% ordenes compradas totalmente por paciente atendido') }" *ngIf="column.prop == 'indicador'">{{value}}</span>
                                                  <span *ngIf="column.prop !== 'indicador'">{{value | number: '1.2-2'}} %</span>
                                                </ng-template>
                                              </ngx-datatable-column>
                                            </ngx-datatable>
                                            <div class="row" style="align-items: center;justify-content: space-between;">
                                              <ul class="list-group list-group-horizontal list-group-flush">
                                                <li class="list-group-item border-0 pl-0">
                                                  <button type="button" (click)="showTableDasboard(4, 0)"
                                                    class="btn-shadow mr-3 btn btn-info">
                                                    <i class="pe-7s-credit"></i>
                                                  </button>
                                                  <button type="button" (click)="showTableDasboard(4, 1)" class="btn-shadow btn btn-info float-right">
                                                    <i class="pe-7s-graph3"></i>
                                                  </button>
                                                </li>
                                              </ul>
                                            </div>
                                            <div class="card-body" *ngIf="isGrafico4">
                                              <div class="d-block" *ngIf="!isLoading4">
                                                  <app-barchar 
                                                  [chartData]="data" [chartOptions]="options1"  [context]="context4"
                                                  ></app-barchar>
                                              </div>
                                            </div>
                                            <ngx-datatable #myTable8 *ngIf="isTable4"
                                            class="bootstrap table table-striped mt-3"
                                            id="datatablele"
                                              [columns]="columns8"
                                              [rows]="rows8"
                                              [columnMode]="ColumnMode.force"
                                              [headerHeight]="$any('auto')"
                                              [rowHeight]="$any('auto')"
                                              [scrollbarH]="true"
                                              >
                                              <ngx-datatable-column [sortable]="false" [headerClass]="column.headerClass" [cellClass]="column.cellClass"  [flexGrow]="1" [minWidth]="90" [width]="column.width" *ngFor="let column of columns8; let i = index;" name="{{column.name}}" prop="{{column.prop}}">
                                                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                                                  let-row="row">
                                                  <span [ngClass]="{'row-paddin': row.indicador.includes('% ordenes compradas totalmente')}" *ngIf="column.prop == 'indicador'">{{value}}</span>
                                                  <span *ngIf="column.prop !== 'indicador'">{{value | number: '1.2-2'}} %</span>
                                                </ng-template>
                                              </ngx-datatable-column>
                                            </ngx-datatable>
                                        </div>
                                      </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                      </div>
                      </ng-template>
                </li>
                <li [ngbNavItem]="3">
                    <a ngbNavLink>POR GRUPOS</a>
                    <ng-template ngbNavContent>
                      <div class="card" *ngIf="action">
                        <div class="card-header">
                          <h4 class="card-title">{{filtro_grupo === 'IMAG' ? 'ATENCIÓN DE EXAMENES DE IMAGENES' : filtro_grupo === 'LABO' ? 'ATENCIÓN DE EXAMENES DE LABORATORIO': 'ATENCIÓN DE RECETAS'}}</h4>
                          <!-- <p>{{message}}</p> -->
                        </div>
                        <div class="card-content collapse show">
                          <div class="card-body">
                            <div class="table table-striped table-bordered selection-deletion-row">
                              <div class="box box-solid">
                                <div id="accordion3">
                                    <div class="card">
                                      <div class="card-header-info" >
                                        <div class="box-header">
                                          <div class="toggle-table">
                                            <div class="callout callout-info">
                                              <h3 class="box-title">SOLICITUDES POR ESPECIALIDAD</h3>
                                            </div>
                                            <button
                                              type="button"
                                              class="btn btn-outline-primary"
                                              (click)="collapse9.toggle()"
                                              [attr.aria-expanded]="!isCollapsed9"
                                              aria-controls="collapseExample"
                                            >
                                              <i class="fa fa-minus" *ngIf="!isCollapsed9"> </i>
                                              <i class="fa fa-plus" *ngIf="isCollapsed9"> </i>
                                            </button>
                                          </div>
                                        </div>
                                      </div>
                                      <div #collapse9="ngbCollapse" [(ngbCollapse)]="isCollapsed9">
                                          <div class="row" style="align-items: center;justify-content:flex-end">
                                            <div style="display:flex;align-items: center; justify-content:flex-end">
                                              <!-- <select class="form-control form-select" style="width: auto!important;" (change)="tipoChange($event.target.value, 'pacientes')" [(ngModel)]="selectedOptionTipo">
                                                <option value="cantidad">Cantidad</option>
                                                <option value="soles">Soles</option>
                                              </select> -->
                                              <select class="form-control form-select" (change)="grupoChange($event.target.value)" style="width:auto!important;" [(ngModel)]="selectedOptionTipo" >
                                                <!-- <option [value]="selectedOptionTipo" selected>{{selectedOptionTipo}}</option> -->
                                                <option
                                                  *ngFor="let grupo of grupos; let i = index"
                                                  [value]="grupo"
                                                  [selected]="grupo === selectedOptionTipo"
                                                >
                                                  {{grupo}}
                                                </option>
                                              </select>
                                              <div style="display:flex;margin:15px;align-items: center;">
                                                <span>Buscar</span>&nbsp;&nbsp;
                                                <input
                                                  type="text"
                                                  style='padding:6px;width:100%;'
                                                  placeholder="por cualquier campo"
                                                  (keyup)='updateFilter($event, selectedOptionTipo)'>
                                              </div>
                                            </div>
                                          </div>
                                          <ngx-datatable #myTable9
                                            class="bootstrap table table-striped"
                                            id="datatablele"
                                            [columns]="columns9"
                                            [rows]="rows9filtered"
                                            [columnMode]="ColumnMode.flex"
                                            [headerHeight]="50"
                                            [rowHeight]="$any('auto')"
                                            [scrollbarH]="true"
                                            (page)="setPage($event)"
                                            [selected]="selected"
                                            [selectionType]="SelectionType.single"
                                          >
                                            <ngx-datatable-column
                                              *ngFor="let column of columns9; let i = index;"
                                              name="{{column.name}}"
                                              prop="{{column.prop}}"
                                              [headerClass]="column.headerClass"
                                              [cellClass]="column.cellClass"
                                              [flexGrow]="1"
                                              [minWidth]="90"
                                              [pipe]="column.pipe"
                                            >
                                              <ng-template
                                                ngx-datatable-cell-template
                                                let-rowIndex="rowIndex"
                                                let-value="value"
                                                let-row="row"
                                              >
                                                <div>
                                                  <span *ngIf="column.prop == 'grupo' || column.prop == 'especialidad'">{{value}}</span>
                                                  <span *ngIf="column.prop !== 'grupo' && column.prop !== 'especialidad' && row.grupo.indexOf('%') === -1 && row.grupo.indexOf('Pago') === -1">{{value  | number : '1.0' }}</span>
                                                  <span *ngIf="column.prop !== 'grupo' && column.prop !== 'especialidad' && row.grupo.indexOf('%') !== -1">{{value  | number : '1.2-2' }} %</span>
                                                  <span *ngIf="column.prop !== 'grupo' && column.prop !== 'especialidad' && row.grupo.indexOf('Pago') !== -1">S/ {{value  | number : '1.2-2' }}</span>

                                                  <!--
                                                  <span *ngIf="column.prop !== 'grupo' && column.prop !== 'especialidad' && row.grupo !== 'Porcentaje'">{{value  | number : '1.0' }}</span>
                                                  <span *ngIf="column.prop !== 'grupo' && column.prop !== 'especialidad' && row.grupo === 'Porcentaje'">{{value  | number : '1.2-2' }} %</span>
                                                  -->
                                                  <!-- <span *ngIf="row.grupo === 'Porcentaje'">{{row.grupo }} %</span>  -->
                                                </div>
                                              </ng-template>
                                            </ngx-datatable-column>
                                        </ngx-datatable>
                                      </div>
                                    </div>
                                    <div class="card" *ngIf="false">
                                      <div class="card-header-info" >
                                        <div class="box-header">
                                          <div class="toggle-table">
                                            <div class="callout callout-info">
                                              <h3 class="box-title">SOLICITUDES POR MÉDICO</h3>
                                            </div>
                                            <button type="button" class="btn btn-outline-primary" (click)="collapse10.toggle()" [attr.aria-expanded]="!isCollapsed10"
                                            aria-controls="collapseExample">
                                            <i class="fa fa-minus" *ngIf="!isCollapsed10"> </i>
                                            <i class="fa fa-plus" *ngIf="isCollapsed10"> </i>
                                            </button>
                                          </div>
                                        </div>
                                      </div>
                                      <div #collapse10="ngbCollapse" [(ngbCollapse)]="isCollapsed10">
                                        <div class="row" style="align-items: center;justify-content:flex-end">
                                          <div style="display:flex;align-items: center; justify-content:flex-end">
                                            <!-- <select class="form-control form-select" style="width: auto!important;" (change)="tipoChange($event.target.value, 'pacientes')" [(ngModel)]="selectedOptionTipo">
                                              <option value="cantidad">Cantidad</option>
                                              <option value="soles">Soles</option>
                                            </select> -->
                                            <select class="form-control form-select" (change)="especialityChange($event.target.value)" style="width:auto!important;" [(ngModel)]="selectedOptionTipo1" >
                                              <!-- <option [value]="selectedOptionTipo" selected>{{selectedOptionTipo}}</option> -->
                                            <option
                                              *ngFor="let especialidad of especialidades; let i = index"
                                              [value]="especialidad"
                                              [selected]="especialidad === selectedOptionTipo1"
                                            >
                                              {{especialidad}}
                                            </option>
                                          </select>
                                            <div class="" style="display:flex;margin:15px;align-items: center;">
                                              <span>Buscar</span>&nbsp;&nbsp;
                                              <input type="text" style='padding:6px;width:100%;' placeholder="por cualquier campo" (keyup)='updateFilter2($event, selectedOptionTipo1)'>
                                            </div>
                                          </div>
                                        </div>
                                        <ngx-datatable #myTable10
                                          class="bootstrap table table-striped "
                                          id="datatablele"
                                          [columns]="columns10"
                                          [rows]="rows10filtered"
                                          [columnMode]="ColumnMode.flex"
                                          [headerHeight]="50"
                                          [rowHeight]="$any('auto')"
                                          [scrollbarH]="true"
                                          (page)="setPage($event)"
                                          [selected]="selected"
                                          [selectionType]="SelectionType.single"
                                        >
                                          <ngx-datatable-column
                                            *ngFor="let column of columns10; let i = index;"
                                            name="{{column.name}}"
                                            prop="{{column.prop}}"
                                            [headerClass]="column.headerClass"
                                            [cellClass]="column.cellClass"
                                            [flexGrow]="1" [minWidth]="90"
                                          >
                                            <ng-template
                                              ngx-datatable-cell-template
                                              let-rowIndex="rowIndex"
                                              let-value="value"
                                              let-row="row"
                                            >
                                              <span *ngIf="column.prop == 'medico' || column.prop == 'especialidad'">
                                                {{value}}
                                              </span>
                                              <span *ngIf="column.prop !== 'medico' && column.prop !== 'especialidad'">
                                                {{value  | number : '1.2-2' }} %
                                              </span>
                                            </ng-template>
                                          </ngx-datatable-column>
                                        </ngx-datatable>
                                      </div>
                                    </div>
                                    <div class="card">
                                      <div class="card-header-info" >
                                        <div class="box-header">
                                          <div class="toggle-table">
                                            <div class="callout callout-info">
                                              <h3 class="box-title">RESUMEN GRUPO DE EXÁMENES POR ESPECIALIDAD</h3>
                                            </div>
                                            <button
                                              type="button"
                                              class="btn btn-outline-primary"
                                              (click)="collapse11.toggle()"
                                              [attr.aria-expanded]="!isCollapsed11"
                                              aria-controls="collapseExample"
                                            >
                                              <i class="fa fa-minus" *ngIf="!isCollapsed11"> </i>
                                              <i class="fa fa-plus" *ngIf="isCollapsed11"> </i>
                                            </button>
                                          </div>
                                        </div>
                                      </div>
                                      <div #collapse11="ngbCollapse" [(ngbCollapse)]="isCollapsed11">
                                        <div class="row" style="align-items: center;justify-content:flex-end">
                                          <div style="display:flex;align-items: center; justify-content:flex-end">
                                            <select
                                              class="form-control form-select"
                                              (change)="filtrarDatosTblResGrpExEsp()"
                                              style="width:auto!important;"
                                              [(ngModel)]="optFiltroResGrpExEsp"
                                            >
                                              <option
                                                *ngFor="let val of fltroEspdsResGrpExEsp; let i = index"
                                                [value]="val"
                                                [selected]="val === optFiltroResGrpExEsp"
                                              >
                                                {{val}}
                                              </option>
                                            </select>
                                            <select
                                              class="form-control form-select"
                                              (change)="filtrarDatosTblResGrpExEsp()"
                                              style="width:auto!important;"
                                              [(ngModel)]="optFiltroGruposResGrpExEsp"
                                            >
                                              <option
                                                *ngFor="let grupo of fltroGruposResGrpExEsp; let i = index"
                                                [value]="grupo"
                                                [selected]="grupo === optFiltroGruposResGrpExEsp"
                                              >
                                                {{grupo}}
                                              </option>
                                            </select>
                                            <div style="display:flex;margin:15px;align-items: center;">
                                              <span>Buscar</span>&nbsp;&nbsp;
                                              <input
                                                type="text"
                                                style='padding:6px;width:100%;'
                                                placeholder="por cualquier campo"
                                                (keyup)='filtrarPorValorTblResGrpExEsp($event)'>
                                            </div>
                                          </div>
                                        </div>
                                        <ngx-datatable
                                          class="bootstrap table table-striped "
                                          id="datatablele"
                                          [columns]="colsResGrpExEsp"
                                          [rows]="rowsFResGrpExEsp"
                                          [columnMode]="ColumnMode.flex"
                                          [headerHeight]="50"
                                          [rowHeight]="$any('auto')"
                                          [scrollbarH]="true"
                                          (page)="setPage($event)"
                                          [selected]="selected"
                                          [selectionType]="SelectionType.single"
                                        >
                                          <ngx-datatable-column
                                            *ngFor="let column of colsResGrpExEsp; let i = index;"
                                            name="{{ column.name }}"
                                            prop="{{ column.prop }}"
                                            [headerClass]="column.headerClass"
                                            [cellClass]="column.cellClass"
                                            [flexGrow]="1"
                                            [minWidth]="90"
                                          >
                                            <ng-template
                                              ngx-datatable-cell-template
                                              let-rowIndex="rowIndex"
                                              let-value="value"
                                              let-row="row"
                                            >
                                              <span *ngIf="column.prop == 'medico' || column.prop == 'especialidad' || column.prop == 'tipoExamen'">
                                                {{value}}
                                              </span>
                                              <span *ngIf="column.prop !== 'medico' && column.prop !== 'especialidad' && column.prop !== 'tipoExamen'">
                                                {{value  | number : '1.2-2' }} %
                                              </span>
                                            </ng-template>
                                          </ngx-datatable-column>
                                        </ngx-datatable>
                                      </div>
                                    </div>
                                    <div class="card">
                                      <div class="card-header-info" >
                                        <div class="box-header">
                                          <div class="toggle-table">
                                            <div class="callout callout-info">
                                              <h3 class="box-title">RESUMEN GRUPO DE EXÁMENES POR ESPECIALIDAD Y EXÁMENES</h3>
                                            </div>
                                            <button
                                              type="button"
                                              class="btn btn-outline-primary"
                                              (click)="collapse12.toggle()"
                                              [attr.aria-expanded]="!isCollapsed12"
                                              aria-controls="collapseExample"
                                            >
                                              <i class="fa fa-minus" *ngIf="!isCollapsed12"> </i>
                                              <i class="fa fa-plus" *ngIf="isCollapsed12"> </i>
                                            </button>
                                          </div>
                                        </div>
                                      </div>
                                      <div #collapse12="ngbCollapse" [(ngbCollapse)]="isCollapsed12">
                                        <div class="row" style="align-items: center;justify-content:flex-end">
                                          <div style="display:flex;align-items: center; justify-content:flex-end">
                                            <select
                                              class="form-control form-select"
                                              (change)="filtrarDatosTblResGrpExExmEsp($event.target.value)"
                                              style="width:auto!important;"
                                              [(ngModel)]="optFltrEspResGrpExExmEsp"
                                            >
                                              <option
                                                *ngFor="let val of fltroEspdsResGrpExExmEsp; let i = index"
                                                [value]="val"
                                                [selected]="val === optFltrEspResGrpExExmEsp"
                                              >
                                                {{val}}
                                              </option>
                                            </select>

                                            <select
                                              class="form-control form-select"
                                              (change)="filtrarDatosTblResGrpExExmEsp($event.target.value)"
                                              style="width:auto!important;"
                                              [(ngModel)]="optFiltroExmResGrpExExmEsp"
                                            >
                                              <option
                                                *ngFor="let val of fltroTipExmResGrpExExmEsp; let i = index"
                                                [value]="val"
                                                [selected]="val === optFiltroExmResGrpExExmEsp"
                                              >
                                                {{val}}
                                              </option>
                                            </select>
                                            <div style="display:flex;margin:15px;align-items: center;">
                                              <span>Buscar</span>&nbsp;&nbsp;
                                              <input
                                                type="text"
                                                style='padding:6px;width:100%;'
                                                placeholder="por cualquier campo"
                                                (keyup)='filtrarPorValorTblResGrpExExmEsp($event)'>
                                            </div>
                                          </div>
                                        </div>
                                        <ngx-datatable
                                          class="bootstrap table table-striped "
                                          id="datatablele"
                                          [columns]="colsResGrpExExmEsp"
                                          [rows]="rowsFResGrpExExmEsp"
                                          [columnMode]="ColumnMode.flex"
                                          [headerHeight]="50"
                                          [rowHeight]="$any('auto')"
                                          [scrollbarH]="true"
                                          (page)="setPage($event)"
                                          [selected]="selected"
                                          [selectionType]="SelectionType.single"
                                        >
                                          <ngx-datatable-column
                                            *ngFor="let column of colsResGrpExExmEsp; let i = index;"
                                            name="{{ column.name }}"
                                            prop="{{ column.prop }}"
                                            [headerClass]="column.headerClass"
                                            [cellClass]="column.cellClass"
                                            [flexGrow]="1"
                                            [minWidth]="90"
                                          >
                                            <ng-template
                                              ngx-datatable-cell-template
                                              let-rowIndex="rowIndex"
                                              let-value="value"
                                              let-row="row"
                                            >
                                              <span *ngIf="
                                                column.prop == 'medico' ||
                                                column.prop == 'especialidad' ||
                                                column.prop == 'tipoAtencion' ||
                                                column.prop == 'Examen'
                                              ">
                                                {{value}}
                                              </span>
                                              <span *ngIf="
                                                column.prop !== 'medico' &&
                                                column.prop !== 'especialidad' &&
                                                column.prop !== 'tipoAtencion' &&
                                                column.prop !== 'Examen'
                                              ">
                                                {{value  | number : '1.2-2' }} %
                                              </span>
                                            </ng-template>
                                          </ngx-datatable-column>
                                        </ngx-datatable>
                                      </div>
                                    </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </ng-template>
                </li>
              </ul>
              <div [ngbNavOutlet]="nav" class="mt-2"></div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>
  
  <!-- ////////////////////////////////////////////////////////////////////////////-->
  

